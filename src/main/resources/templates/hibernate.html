<!DOCTYPE HTML>
<html>
	<head> 
	    <title>Spring test</title> 
	    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
	    <script type="text/javascript">
	    	/*<![CDATA[*/
	    	           
	    	function add() {
	    		
	    		var firstName = $("#firstNameCreate").val();
	    		var lastName = $("#lastNameCreate").val();
	    		
	    		$.ajax({
    			  url: "/hibernate/person?firstName=" + firstName + "&lastName=" + lastName,
    			  method : "PUT"
    			}).done(function(data) {
	    			$("#output").text(JSON.stringify(data));
    			}).error(function(error) {
	    			$("#output").text(JSON.stringify(error));
    			});
	    		
	    		return false;
	    	}
	    	           
	    	function update() {
	    		
	    		var id = $("#id").val();
	    		var firstName = $("#firstNameUpdate").val();
	    		var lastName = $("#lastNameUpdate").val();
	    		
	    		$.ajax({
    			  url: "/hibernate/person?id=" + id + "&firstName=" + firstName + "&lastName=" + lastName,
    			  method : "PUT"
    			}).done(function(data) {
	    			$("#output").text(JSON.stringify(data));
    			}).error(function(error) {
	    			$("#output").text(JSON.stringify(error));
    			});
	    		
	    		return false;
	    	}
	    	
	    	function show() {
	    		$.get("/hibernate/persons", function(data) {
	    			$("#list").text(JSON.stringify(data));
	    		});
	    	}
	    	
	    	show();
	    	
	    	/*]]>*/
	    </script>
	</head>
    <body>
    
    	<div layout:include="index :: index-menu"></div>
    
		<h2>List of persons</h2>
		<textarea id="list" rows="10" cols="80"></textarea>
		<p>
			<button onClick="show();">Refresh list of persons</button>
		</p>
		
		<h2>Add a Person using Hibernate</h2>
		<table>
		    <tr>
		        <td>First Name:</td>
		        <td><input id="firstNameCreate" type="text" /></td>
		    </tr>
		    <tr>
		        <td>Last Name:</td>
		        <td><input id="lastNameCreate" type="text" /></td>
		    </tr>
		    <tr>
				<td><button onClick="add();">Add a Person</button></td>
		    </tr>
		</table>
				
		<h2>Update a Person using Hibernate</h2>
		<table>
		    <tr>
		        <td>Id:</td>
		        <td><input id="id" type="text" /></td>
		    </tr>
		    <tr>
		        <td>First Name:</td>
		        <td><input id="firstNameUpdate" type="text" /></td>
		    </tr>
		    <tr>
		        <td>Last Name:</td>
		        <td><input id="lastNameUpdate" type="text" /></td>
		    </tr>
		    <tr>
				<td><button onClick="update();">Update Person</button></td>
		    </tr>
		</table>
		
		<h2>Output</h2>
		<textarea id="output" rows="10" cols="80"></textarea>
    </body>
</html>